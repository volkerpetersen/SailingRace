NEW NMEA 1083 SENTENCES AVAILABLE IN SAILTIMER API
SailTimer Inc. - April 1 2017
www.SailTimerWind.com/Developers.html


Until now, the SailTimer API™ on Android transmitted Apparent Wind Direction and Apparent Wind Speed simply as AWD and AWS.  But there are two new improvements in the works.  The first change is adding the following sentences in NMEA 0183 format for wind data from the wireless SailTimer Wind Instrument™.  Information about parsing this data is below.  The second change will be that soon we will be making additional crowd-sourced data available, if you want to display a live overlay of wind conditions from other boats nearby as well.

The 3 new sentences being added are: 

$WIMWD,148,T,166,M,1.2,N,0.6,M*—

$WIMWV,360.0,R,020.0,N,A*—

$PSTW,116,T,133,M,00.0,N,00.0,M*03




1. Official Sentence for True (Non-Apparent) Wind Direction: MWD

The format of the “MWD" NMEA sentence for wind direction is:     $WIMWD,148,T,166,M,1.2,N,0.6,M*—

In this format, initial 2 letters after the $ are the talker-ID, with WI specifying that it is Weather Information.  Then the MWD indicates that it is wind speed and direction.  

All of the wind data in MWD is True wind (not Apparent or Relative), like what is used on maps and in weather forecasts.  In contrast, the Apparent (also called Relative) wind is what you feel when you are moving. 

There is also True-North wind direction (versus Magnetic-North wind direction), and it is important to remember that this is totally separate from the previous paragraph.  Magnetic-North direction refers to the magnetic north pole that traditional compasses point to.  But True-North direction is based on the North Pole on a map, which is not quite in the same place.

So in the sample sentence above: 148,T is the wind direction in True-North degrees.  166,M is the Magnetic-North wind direction. 

1.2,N is the wind speed in knots (nautical miles per hour), which is represented by N in the sentence.  0.6,M is the wind speed in meters per second.  Finally, the 2 digits after the '*' is a checksum.  

Once the sentence is assembled, we use hash encryption before sending it as intents.



2.  Official Sentence for Wind Angle: MWV
Wind angle is defined as the difference between the boat’s heading and the Apparent Wind Direction (AWD).  

The format of MWV for wind speed and wind angle (not the same as wind direction) is:     $WIMWV,360.0,R,020.0,N,A*--

The initial 2 letters after the $ are the talker-ID, with WI specifying that it is Weather Information.  Then the MWV indicates that it is wind speed and angle.  360.0 is in degrees and it's 5 characters long.  

The next parameter is R for relative (i.e., Apparent Wind).  

020.0 is sample data for the wind speed.  The units for wind speed on boats is in knots, which is represented by N in the sentence. 

'A' means valid data, and 2 Bytes after the '*' is checksum.




3. Proprietary STW Sentence

There is no NMEA 0183 sentence for Apparent wind direction and speed. When the specification was set up probably in the early 1990s, perhaps it did not seem possible that a compass could ever be built right in a masthead anemometer. So NMEA 0183 only includes sentences for apparent wind angle, not direction. But we don’t want to convert from Apparent to True for the MWD sentence, send that data to an app, and then re-convert it back to Apparent. Doing the math twice makes the data less precise. Therefore, we added a proprietary sentence. It is acceptable within the NMEA 0183 specification to use a proprietary sentence, if it begins with $P to indicate that it is proprietary, and then some characters to identify what it is. 

$PSTW,116,T,133,M,0,N,0.0,M*03

$P - Proprietary sentence
STW - SailTimer Wind Instrument
116,T - Apparent Wind Direction (AWD) in True-North reference 133,M - Apparent Wind Direction (AWD) in Magnetic-North reference 0,N - Apparent Wind Speed in knots
0.0,M - Apparent Wind Speed in meters per second
*03 - Checksum 

